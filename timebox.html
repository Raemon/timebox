<head>
  <title>timebox</title>
  <link rel="icon" 
        type="image/png" 
        href="/time.png">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
    <!-- {{> starfield}} -->
    
    <div class="text-center">
      {{> header}}
      {{> currentTimebox}}
      {{> userInfo}}

    </div>
    {{>footer}}
</body>

<template name="header">
  <div class="text-center">
    <h1 class="title header">Get in the Zone</h1>
  </div>
</template>

<template name="currentTimebox">
  <div class="currentTimebox">

      <div id="timer" class="timer {{settingTimer}}">{{timeRemaining}}</div> 

      <div class="setTimer {{settingTimer}}">
        <select class="timerSelect" id="minutesSelect" value="25">
          {{#each range 59}}
            <option class="timerSelect" value="{{this}}">{{zfill this 2}}</option>
          {{/each}}
        </select>
        :
        <select class="timerSelect" id="secondsSelect" value="0">
          {{#each range 59}}
            <option value="{{this}}">{{zfill this 2}}</option>
          {{/each}}
        </select>
      </div>

      {{> timerButtons}}
      <input class="text-center strong" name="tags" id="tagsField" value="uncategorized,"/>
  </div>
  <script>
    $("#tagsField").tagsInput();
  </script>
</template>

<template name="userInfo">
  <div class="userInfo">
    <div class="text-center">
      <div class="loginBox">{{> login}}</div>
      {{#if userAddress}}
        {{> oldTimeboxes}}
      {{/if}}
    </div>
  </div>
</template>

<template name="timerButtons">
  <div class="row text-center">
    <div class="btn btn-large timer-set {{settingTimer}}">Set Time</div>
    <div class="btn btn-large btn-primary timer-start ">Start</div>
    <div class="btn btn-large btn-danger timer-stop">Stop</div>
  </div>
</template>

<template name="oldTimeboxes">
  <div class="text-center">
    {{#each userTimeboxes}}
      {{> timeboxData}}
    {{/each}}
  </div>
</template>

<template name="timeboxData">
  <div id="timeboxData{{this._id}}" class="timebox {{bgcolor}}">
      <div class="timeboxData_right">
        <div class="btn repeatTimebox">
          Repeat
        </div>
      </div>
      <div class="timeboxData_left">
        <div class="timeboxDuration">
          {{duration}} - 
          <span class="timebox{{complete}}">{{complete}}</span>
        </div>
        {{create_date}} - {{create_time}}<br>

        Tags: {{tags}}<br>
    </div>

  </div>
</template>

<template name="footer">
  <div class="row footer">
    <div class="container">
    {{> mochaTestReport}}
    {{> serverTestReport}}
  </div>
</div>
</template>

<template name="starfield">
  <div id="starfield">
  </div>
  <script src="starfield.js"></script>
  <script>

  var container = document.getElementById('starfield');
  var starfield = new Starfield();
  starfield.initialise(container);
  starfield.start();
  </script>
</template>
