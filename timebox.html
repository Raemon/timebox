<head>
  <title>timebox</title>
  <link rel="icon" 
        type="image/png" 
        href="/time.png">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
    <div id="wrapper">

        <!-- Sidebar -->
        <div id="sidebar-wrapper">
            <ul class="sidebar-nav">
              {{> login}}
              {{> timeboxes}}
            </ul>
        </div>

        <!-- Page content -->
        <div id="page-content-wrapper">
          {{> header}}
          {{> currentTimebox}}
          {{> footer}}
        </div>
    </div>
</body>

<template name="header">
  <h2 class="title">Get In the Zone</h2>
</template>

<template name="currentTimebox">
  <div class="currentTimebox text-center">

      <div id="timer" class="timer {{settingTimer}}">{{timeRemaining}}</div> 
      {{> setTimer}}


      {{> timerButtons}}
      <input class="text-center strong" name="tags" id="tagsField" value="uncategorized,"/>
  </div>
  <script>
    $("#tagsField").tagsInput();
  </script>
</template>

          <template name="setTimer">
            <div class="setTimer {{settingTimer}}">
              <select class="timerSelect" id="minutesSelect" value="25">
                {{#each range 59}}
                  <option class="timerSelect" value="{{this}}">{{zfill this 2}}</option>
                {{/each}}
              </select>
              :
              <select class="timerSelect" id="secondsSelect" value="0">
                {{#each range 59}}
                  <option value="{{this}}">{{zfill this 2}}</option>
                {{/each}}
              </select>
            </div>
          </template>

          <template name="timerButtons">
              <div class="btn btn-large timer-set {{settingTimer}}">Set</div>
              <div class="btn btn-large btn-primary timer-start ">Start</div>
              <div class="btn btn-large btn-danger timer-stop">Stop</div>
          </template>

<template name="timeboxes">
  {{#if userAddress}}
    {{#each userTimeboxes}}
      {{> timeboxData}}
    {{/each}}
  {{/if}}
</template>

<template name="timeboxData">
  <div id="timeboxData{{this._id}}" class="timebox {{color}}">
      <div class="timeboxData_right">
        <div class="btn repeatTimebox">
          Repeat
        </div>
      </div>
      <div class="timeboxData_left {{create_date}}">
        <div class="timeboxDuration">
          {{duration}} - 
          <span class="timebox{{complete}}">{{complete}}</span>
        </div>
        {{create_date}} - {{create_time}}<br>
      </div><br><br>
      <div class="timeboxData_tags {{create_date}}">
        Tags: 
        {{#each tags}}
          {{this}},
        {{/each}}
      </div>
  </div>
</template>

<template name="footer">
  <div class="footer">
    {{> mochaTestReport}}
    {{> serverTestReport}}
  </div>
</template>

<template name="starfield">
  <div id="starfield">
  </div>
  <script src="starfield.js"></script>
  <script>

  var container = document.getElementById('starfield');
  var starfield = new Starfield();
  starfield.initialise(container);
  starfield.start();
  </script>
</template>
